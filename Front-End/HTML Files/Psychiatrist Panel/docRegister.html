<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="../../CSS Files/Psychiatrist Panel Designs/PsychiatristSignUpDesign.css">
        <link rel="shortcut icon" type="image/x-icon" href="../../ICONS/mi3.png">
        <link href="https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <title>Sign Up</title>
    </head>
    <body>
        <div class="container-fluid">
            <div class="row no-gutter">
                <!-- The image half -->
                <div class="col-md-7 d-none d-md-flex bg-image"></div>
                <!-- The content half -->
                <div class="col-md-5 bg-light">
                    <div class="login d-flex align-items-center py-5">
                        <!-- Demo content-->
                        <div class="container">
                            <div class="row">
                                <div class="col-lg-10 col-xl-7 mx-auto">
                                    <h3 class="display-4">Sign Up</h3>
                                    <p class="text-muted mb-4"></p>
                                    <form id="regist">
                                        <div class="form-group mb-3">
                                            <input id="name" type="text" placeholder="Name" required="" autofocus="" class="form-control rounded-pill border-0 shadow-sm px-4">
                                        </div>
                                        <div class="form-group mb-3">
                                            <input id="email" type="email" placeholder="Email address" required="" autofocus="" class="form-control rounded-pill border-0 shadow-sm px-4">
                                        </div>
                                        <div class="form-group mb-3">
                                            <input id="mobile" type="text" placeholder="Mobile Number" required="" autofocus="" class="form-control rounded-pill border-0 shadow-sm px-4">
                                        </div>
                                        <div class="form-group mb-3">
                                            <input id="password" type="password" placeholder="Password" required="" class="form-control rounded-pill border-0 shadow-sm px-4 ">
                                        </div>
                                        <div class="form-group mb-3">
                                            <input id="password_confirmation" type="password" placeholder="Re-type Password" required="" class="form-control rounded-pill border-0 shadow-sm px-4 ">
                                        </div>
                                        <p>By creating an account you agree to our <a href="#" style="color:dodgerblue">Terms & Privacy</a>.</p>
                                        <label>
                                        <input type="checkbox" checked="checked" name="remember" style="margin-bottom:15px"> I agree to all the Terms & Policy.
                                        </label>
                                        <button type="submit" id="reg" class="btn btn-primary btn-block  mb-2 rounded-pill shadow-sm" style="height: 42px;font-size: 17px;">Sign Up&nbsp;<i class='bx bxs-log-in-circle'></i></button>
                                        <!-- <a href="#" class="alert-link" style="text-align: center;color: black;font-weight: lighter;" >Forgot password?</a> -->
                                        <a href="#" class="alert-link" style="text-align: center; color: black;font-weight: lighter;" >&nbsp;&nbsp;&nbsp;&nbsp;Already have an account? Login </a>
                                       
                                    </form>
                                </div>
                            </div>
                        </div>
                        <!-- End -->
                    </div>
                </div>
                <!-- End -->
            </div>
        </div>

        <script>

            document.getElementById('regist').addEventListener('submit', register);


            function register(e){
                e.preventDefault();
                let name = document.getElementById('name').value;
                let email = document.getElementById('email').value;
                let mobile = document.getElementById('mobile').value;
                let password = document.getElementById('password').value;
                let password_confirmation = document.getElementById('password_confirmation').value;



                if(password != password_confirmation){return;}


                fetch('http://127.0.0.1:8000/api/doc/register', {
                    method : 'POST',
                    headers : {
                        'Accept' : 'application/json, text/plain, */*',
                        'Content-type' : 'application/json'
                    },
                    body : JSON.stringify({name:name, email:email, mobile:mobile, password:password})
                })
                .then(res => res.json())
                .then(data => 
                    sessionStorage.setItem('docToken', data.res)                     
                );
                if(sessionStorage.getItem('docToken') == 1) window.location.href="./verifyMail.html";
            }
        </script>



    </body>
</html>